var e,t;e=new/*#__PURE__*/(function(){var e;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.board=e||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.size=4,this.status="idle",this.score=0}return e=[{key:"moveLeft",value:function(){var e=this.board.map(function(e){return e.slice()});if(!this.handleGameOver()){for(var t=0;t<this.board.length;t++)this.board[t]=this.mergeX(this.board[t]);this.boardsAreEqual(e,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard(this.board),this.checkWin()}}},{key:"moveRight",value:function(){var e=this.board.map(function(e){return e.slice()});if(!this.handleGameOver()){for(var t=0;t<this.board.length;t++)this.board[t]=this.mergeX(this.board[t],!0);this.boardsAreEqual(e,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard(this.board),this.checkWin()}}},{key:"moveUp",value:function(){var e=this.board.map(function(e){return e.slice()});this.handleGameOver()||(this.mergeY(!1),this.boardsAreEqual(e,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard(this.board),this.checkWin())}},{key:"moveDown",value:function(){var e=this.board.map(function(e){return e.slice()});this.handleGameOver()||(this.mergeY(!0),this.boardsAreEqual(e,this.board)||this.addRandomTile(),this.updateScore(),this.renderBoard(this.board),this.checkWin())}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status="playing",this.renderBoard(this.board),this.addRandomTile(),this.addRandomTile()}},{key:"restart",value:function(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.status="playing",this.score=0,this.addRandomTile(),this.addRandomTile()}},{key:"mergeY",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=0;r<this.board.length;r++)!function(r){for(var a=[],i=0;i<e.board.length;i++)a.push(e.board[i][r]);t&&a.reverse(),a=a.filter(function(e){return 0!==e});for(var s=0;s<a.length-1;s++)a[s]===a[s+1]&&(a[s]+=a[s+1],e.score+=a[s],a[s+1]=0,s++);for(a=a.filter(function(e){return 0!==e});a.length<e.size;)a.push(0);t&&a.reverse();for(var n=0;n<e.size;n++)e.board[n][r]=a[n]}(r)}},{key:"mergeX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t?e.slice().reverse():e.slice();r=r.filter(function(e){return 0!==e});for(var a=0;a<r.length-1;a++)r[a]===r[a+1]&&(r[a]+=r[a+1],this.score+=r[a],r[a+1]=0,a++);for(r=r.filter(function(e){return 0!==e});r.length<this.size;)r.push(0);return t&&r.reverse(),r}},{key:"renderBoard",value:function(e){for(var t=document.querySelectorAll(".field-cell"),r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++){var i=t[r*this.size+a],s=e[r][a];i.textContent=0===s?"":s,i.className="field-cell",s>0?i.classList.add("field-cell--".concat(s)):i.className="field-cell"}}},{key:"updateScore",value:function(){document.querySelector(".game-score").textContent=this.score}},{key:"createEmptyBoard",value:function(){for(var e=[],t=0;t<this.size;t++)e.push([0,0,0,0]);return e}},{key:"addRandomTile",value:function(){for(var e=[],t=0;t<this.size;t++)for(var r=0;r<this.size;r++)0===this.board[t][r]&&e.push({row:t,col:r});if(e.length>0){var a=Math.floor(Math.random()*e.length),i=e[a],s=i.row,n=i.col,o=.9>Math.random()?2:4;this.board[s][n]=o}}},{key:"boardsAreEqual",value:function(e,t){for(var r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)if(e[r][a]!==t[r][a])return!1;return!0}},{key:"checkWin",value:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=this.board[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var s=a.value,n=!0,o=!1,h=void 0;try{for(var d,l=s[Symbol.iterator]();!(n=(d=l.next()).done);n=!0){var u=d.value;if(2048===u){this.status="win",this.winMessage();return}}}catch(e){o=!0,h=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw h}}}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}},{key:"winMessage",value:function(){document.querySelector(".message-win").classList.remove("hidden")}},{key:"checkMove",value:function(){for(var e=0;e<this.board.length;e++)for(var t=0;t<this.board[e].length;t++)if(0===this.board[e][t]||t<this.board[e].length-1&&this.board[e][t]===this.board[e][t+1]||e<this.board.length-1&&this.board[e][t]===this.board[e+1][t])return!0;return!1}},{key:"gameOverMessage",value:function(){document.querySelector(".message-lose").classList.remove("hidden")}},{key:"handleGameOver",value:function(){return!1===this.checkMove()&&(this.status="lose",this.gameOverMessage(),!0)}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(t.prototype,e),t}()),(t=document.querySelector(".start")).addEventListener("click",function(r){r.preventDefault(),t.classList.contains("start")?(e.start(),t.classList.remove("start"),t.classList.add("restart"),t.textContent="Restart",document.querySelector(".message-start").classList.add("hidden")):t.classList.contains("restart")&&(e.restart(),document.querySelector(".message-win").classList.add("hidden"),document.querySelector(".message-lose").classList.add("hidden")),e.renderBoard(e.getState()),e.updateScore(e.getScore())}),document.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":e.moveLeft();break;case"ArrowRight":e.moveRight();break;case"ArrowUp":e.moveUp();break;case"ArrowDown":e.moveDown()}});
//# sourceMappingURL=index.043bbf3b.js.map
